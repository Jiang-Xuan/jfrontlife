{"data":{"markdownRemark":{"html":"<h2 id=\"问题-reproduce\"><a href=\"#%E9%97%AE%E9%A2%98-reproduce\" aria-label=\"问题 reproduce permalink\" class=\"custom-class\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>问题 reproduce</h2>\n<ol>\n<li>checkout 出来一个 git 分支并命名 <code class=\"language-text\">git checkout -b feat-helol</code></li>\n<li>将该分支 push 至远程 <code class=\"language-text\">git push origin feat-helol</code></li>\n<li>不断的 commit</li>\n<li>发现 typo, <code class=\"language-text\">hello</code> 拼写成了 <code class=\"language-text\">helol</code></li>\n</ol>\n<h2 id=\"开始的解决办法\"><a href=\"#%E5%BC%80%E5%A7%8B%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95\" aria-label=\"开始的解决办法 permalink\" class=\"custom-class\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>开始的解决办法</h2>\n<ol>\n<li>重命名本地分支 <code class=\"language-text\">git branch -m feat-hello</code></li>\n<li>继续 push 的时候遇到了错误</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">jiangxuandeMacBook-Pro:insight_v2 jiangxuan 🍇  <span class=\"token punctuation\">(</span>feat-hello<span class=\"token punctuation\">)</span>\n<span class=\"token variable\">$git</span> push\nfatal: The upstream branch of your current branch does not match\nthe name of your current branch.  To push to the upstream branch\non the remote, use\n\n    <span class=\"token function\">git</span> push origin HEAD:feat-helol\n\nTo push to the branch of the same name on the remote, use\n\n    <span class=\"token function\">git</span> push origin feat-hello\n\nTo choose either option permanently, see push.default <span class=\"token keyword\">in</span> <span class=\"token string\">'git help config'</span><span class=\"token keyword\">.</span></code></pre></div>\n<p>??? 什么情况</p>\n<h2 id=\"解决办法\"><a href=\"#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95\" aria-label=\"解决办法 permalink\" class=\"custom-class\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解决办法</h2>\n<p>来源于 <a href=\"https://stackoverflow.com/questions/24864700/fatal-the-upstream-branch-of-your-current-branch-does-not-match-the-name-of-you#answer-36281487\">https://stackoverflow.com/questions/24864700/fatal-the-upstream-branch-of-your-current-branch-does-not-match-the-name-of-you#answer-36281487</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 创建正确的远程分支</span>\n<span class=\"token function\">git</span> push origin feat-hello\n<span class=\"token comment\"># 移除错误的远程分支</span>\n<span class=\"token function\">git</span> push origin :feat-helol\n<span class=\"token comment\"># 修改该分支的上游分支</span>\n<span class=\"token comment\"># git 官方文档 https://git-scm.com/docs/git-branch#Documentation/git-branch.txt--ultupstreamgt</span>\n<span class=\"token function\">git</span> branch feat-hello -u feat-hello</code></pre></div>\n<h2 id=\"原理分析\"><a href=\"#%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90\" aria-label=\"原理分析 permalink\" class=\"custom-class\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>原理分析</h2>\n<p>导致git报错的配置是 <code class=\"language-text\">git config push.default</code>, <a href=\"https://git-scm.com/docs/git-config#Documentation/git-config.txt-pushdefault\">这里</a>是 git 关于该配置的官方文档</p>\n<blockquote>\n<p>By default, git config push.default is set to simple, meaning it will never be happy if the remote branch doesn't match the local branch's name, even if the remote is set as the upstream. Setting git config push.default upstream will suppress those errors.\n引用于: <a href=\"https://stackoverflow.com/questions/24864700/fatal-the-upstream-branch-of-your-current-branch-does-not-match-the-name-of-you#comment-64377707\">https://stackoverflow.com/questions/24864700/fatal-the-upstream-branch-of-your-current-branch-does-not-match-the-name-of-you#comment-64377707</a></p>\n</blockquote>\n<blockquote>\n<p>默认下, <code class=\"language-text\">git config push.default</code> 设置为 <code class=\"language-text\">smple</code>, 意味着如果远程的分之命名和本地分支的命名不一致, git 将永远不会'开心', 即使该远程分支被设置为上游分支. 设置 <code class=\"language-text\">git config push.default upstream</code> 可以抑制住该错误</p>\n</blockquote>\n<p>上诉的解释虽然可以抑制错误, 但是不是预期的结果, 预期的结果为上游的分支命名也被修改</p>\n<p>所以解决方案为 创建正确的远程分支, 删除错误的远程分支, 配置本地分支的上游分支</p>","frontmatter":{"date":"April 10, 2019","path":"/改变本地git分支名之后遇到的问题","title":"改变本地git分支名之后遇到的问题","tags":[]}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}